// Specify your database connection details
datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "./generated/client"
}

model lectures {
  id       Int      @id @default(autoincrement()) @db.UnsignedInt
  title    String   @db.VarChar(255)
  category String   @db.VarChar(255)
  type     String   @db.VarChar(255)
  scenes   scenes[]
}

model scenes {
  id             Int        @id @default(autoincrement()) @db.UnsignedInt
  lecture_id     Int        @db.UnsignedInt
  order          Int
  archived       Boolean    @default(false)
  successSceneId Int?      @db.UnsignedInt
  failureSceneId Int?      @db.UnsignedInt
  created_at     DateTime   @db.Timestamp(0)
  updated_at     DateTime   @db.Timestamp(0)
  segments       segments[]

  lectures lectures @relation(fields: [lecture_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "scenes_lecture_id_foreign")

  @@index([lecture_id], map: "scenes_lecture_id_foreign")
}

model segments {
  id            Int      @id @default(autoincrement()) @db.UnsignedInt
  scene_id      Int      @db.UnsignedInt
  video         String?
  slide         Json
  order         Int
  archived      Boolean  @default(false)
  type          String
  nextSegmentId Int?     @db.UnsignedInt
  data          Json?
  created_at    DateTime @db.Timestamp(0)
  updated_at    DateTime @db.Timestamp(0)

  scenes scenes @relation(fields: [scene_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "segments_scene_id_foreign")

  @@index([scene_id], map: "segments_scene_id_foreign")
}
